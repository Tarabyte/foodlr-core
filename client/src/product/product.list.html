<div class=="row">
  <div class="col-sm-2">
    <ul class="nav nav-pills nav-stacked">
      <li ng-repeat="category in categories" ng-class="{active: category.id===currentCategory}">
        <a ng-click="currentCategory = category.id" href="javascript: void 0;">{{::category.caption}}</a>
      </li>
    </ul>
  </div>
  <div class="col-sm-8">
    <div class="row">
      <div class="col-sm-4 col-sm-offset-8">
        <div class="input-group pull-right">
          <input type="search" placeholder="Найти" class="form-control" ng-model="search" ng-model-options="{debounce: 500}">
          <span class="input-group-addon"><fa icon="search"/></span>
        </div>
      </div>
    </div>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Название</th>
          <th>Действия</th>
          <th>Активно</th>
          <th>Номер</th>
          <th>Пищевая ценность (ЖБУ)</th>
          <th>Категория</th>
          <th>Ярлыки</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="item in list">
          <td>
            <a ui-sref="{{ctrl.data.root}}.item({id: item.id})">{{item.caption}}</a>
            <div class="text-muted small">{{item.description|limitTo: 100}}...</div>
          </td>
          <td class="no-wrap">
            <button type="button" class="btn btn-sm btn-danger" title="Удалить" ng-click="ctrl.remove(item.id)">
              <fa icon="trash" />
            </button>
            <button type="button" class="btn btn-sm btn-warning" title="Деактивировать" ng-click="ctrl.toggle(item.id)" ng-show="item.active">
              <fa icon="ban" />
            </button>
            <button type="button" class="btn btn-sm btn-success" title="Активировать" ng-click="ctrl.toggle(item.id)" ng-show="!item.active">
              <fa icon="check" />
            </button>
            <button type="button" class="btn btn-sm btn-default" title="Вверх" ng-click="ctrl.up(item.id)" ng-show="!$first">
              <fa icon="arrow-up" />
            </button>
            <button type="button" class="btn btn-sm btn-default" title="Вниз" ng-click="ctrl.down(item.id)" ng-show="!$last">
              <fa icon="arrow-down" />
            </button>

          </td>
          <td>{{item.active ? 'Да': 'Нет'}}</td>
          <td>{{item.order}}</td>
          <td>{{::item.calories}} ({{::item.fats}} | {{::item.proteins}} | {{::item.carbs}})
          </td>
          <td><span class="label label-info clickable" ng-click="currentCategory = item.category.id">{{::item.category.caption}}</span>
          </td>
          <td>
            <span ng-repeat="tag in tags"><span class="label label-primary clickable"  ng-click="currentTag = tag.id">{{::tag.caption}}</span>&nbsp; </span>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr ng-if="!list.length">
          <td colspan="7">
            Нет записей
          </td>
        </tr>
        <tr>
          <td colspan="7">
            <form class="form-inline" ng-submit="ctrl.save()">
              <button type="submit" class="btn btn-success" title="Добавить">
                <fa icon="plus" />
              </button>
              <input type="text" class="form-control" id="caption" placeholder="Название" ng-model="item.caption" required>
              <input type="number" class="form-control" id="calories" placeholder="Калории" ng-model="item.calories" required step="any">
              <input type="text" class="form-control" id="description" placeholder="Описание" ng-model="item.description">
            </form>
          </td>
        </tr>
        <tr>
          <td colspan="7">
            <ul class="pagination" style="margin: 0;">
              <li ng-class="{disabled: page===1}">
                <a ng-click="page = page - 1" href="javascript: void 0;">&laquo;</a>
              </li>
              <li ng-repeat="current in pageList" ng-class="{active: current===page}">
                <a ng-click="page = current" href="javascript: void 0;">{{current}}</a>
              </li>
              <li ng-class="{disabled: page===lastPage}">
                <a ng-click="page = page + 1" href="javascript: void 0;">&raquo;</a>
              </li>
            </ul>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
   <div class="col-sm-2">
    <ul class="nav nav-pills nav-stacked">
      <li ng-repeat="tag in tags" ng-class="{active: tag.id===currentTag}">
        <a ng-click="currentTag = tag.id" href="javascript: void 0;">{{::tag.caption}}</a>
      </li>
    </ul>
  </div>
</div>

