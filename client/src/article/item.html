<ol class="breadcrumb">
  <li><a ui-sref="{{ctrl.data.root}}.list">{{ctrl.data.title}}</a></li>
  <li class="active">{{ctrl.title}}</li>
</ol>

<form class="form-horizontal" ng-submit="ctrl.save()">
  <div class="form-group">
    <label for="caption" class="col-sm-2 control-label">Название</label>
    <div class="col-sm-8">
      <input type="text" id="caption" name="caption" class="form-control" placeholder="Название" required ng-model="item.caption">
    </div>
  </div>
    <div class="form-group">
    <label for="content" class="col-sm-2 control-label">Текст</label>
    <div class="col-sm-8">
      <div text-angular ng-model="item.content" id="content" ng-required></div>
    </div>
  </div>
  <div class="form-group">
    <label for="images" class="col-sm-2 control-label">Картинки</label>
    <div class="col-sm-8">
      <div ng-if="ctrl.isNew" class="text-muted well well-sm">Картинки можно будет загрузить после сохранения</div>
      <div ng-if="!ctrl.isNew">
        <div ng-if="item" class="col-sm-2 well" nv-file-over nv-file-drop uploader="uploader"> Перетащите файлы для загрузки или

          <div>
            <input type="file" nv-file-select uploader="uploader" multiple/>
          </div>
        </div>
        <div class="col-sm-10">
          <div class="media thumbnail" ng-repeat="img in item.images">
            <div class="media-left">
              <a href="{{img.src}}" target="_blank">
                <img class="img-preview media-object" ng-src="{{img.src}}"/>
              </a>

            </div>
            <div class="media-body">
              <input type="text" ng-model="img.caption" class="form-control" placeholder="Описание картинки">
              <button type="button" class="btn btn-danger" ng-click="ctrl.removeImage(img)"><fa icon="trash"/></button>
            </div>
            <div class="media-right">
              <span class="media-caption">{{img.name}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="rubric" class="col-sm-2 control-label">Рубрики</label>
    <div class="btn-group col-sm-8">
      <label class="btn" ng-repeat="rubric in rubrics track by rubric.id"
          ng-class="{'btn-info':selectedRubrics[rubric.id]}">
        <input type="checkbox" value="{{rubric.id}}" name="category" ng-model="$parent.selectedRubrics[rubric.id]">{{rubric.caption}}
      </label>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-4 col-sm-offset-6">
      <div class="bth-group pull-right">
        <button type="submit" class="btn btn-success" ng-if="ctrl.isNew"><fa icon="plus"/> Создать</button>
        <button type="submit" class="btn btn-success" ng-if="!ctrl.isNew"><fa icon="save"/> Сохранить</button>
        <button type="button" class="btn btn-danger" ng-if="!ctrl.isNew" ng-click="ctrl.remove()"><fa icon="trash"/> Удалить</button>

        <button type="button" class="btn btn-link" ng-click="ctrl.list()">Отмена</button>
      </div>
    </div>
  </div>
</form>
